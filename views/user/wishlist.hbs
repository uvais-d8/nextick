<!-- products.hbs -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wishlist</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- favicon -->
    <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png">
    <!-- google font -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
    <!-- fontawesome -->
    <link rel="stylesheet" href="/assets/css/all.min.css">
    <!-- bootstrap -->
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
    <!-- owl carousel -->
    <link rel="stylesheet" href="/assets/css/owl.carousel.css">
    <!-- magnific popup -->
    <link rel="stylesheet" href="/assets/css/magnific-popup.css">
    <!-- animate css -->
    <link rel="stylesheet" href="/assets/css/animate.css">
    <!-- mean menu css -->
    <link rel="stylesheet" href="/assets/css/meanmenu.min.css">
    <!-- main style -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <!-- responsive -->
    <link rel="stylesheet" href="/assets/css/responsive.css">

    <!-- Custom CSS for product listing -->.
    <style>
        /* General Body Styles */
        body {
            margin: -25px;
            font-family: Arial, sans-serif;
        }

        /* Card Styles */
        .card {
            box-shadow: 0 0 15px 9px #cccccc69;
            border: none;
            transition: box-shadow 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 0 15px 9px #eaeaea69;
        }

        .price {
            font-size: 14px;
            color: #ff0000;
            text-decoration: line-through;
            margin-right: 5px;
        }

        .offer-price {
            font-size: 18px;
            color: #008000;
            font-weight: bold;
        }

        .discount-tag {
            font-size: 12px;
            color: #ff8800;
            margin-left: 5px;
        }

        .a:hover {
            color: white;
        }
    </style>
</head>

<body>

    <!--PreLoader-->
    <div class="loader">
        <div class="loader-inner">
            <div class="circle"></div>
        </div>
    </div>
    <!--PreLoader Ends-->

    <!-- header -->
    <div class="top-header-area" id="sticker">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-sm-12 text-center">
                    <div class="main-menu-wrap">
                        <!-- logo -->
                        <div class="site-logo">
                            <a href="/">
                                <h4 style="font-weight: bold; color:white">WATCH PREMIUM</h4>
                            </a>
                        </div>
                        <!-- logo -->

                        <!-- menu start -->
                        <nav class="main-menu">
                            <ul>
                                <li><a href="/">Home</a>
                                </li>

                                <li><a href="/about">About</a></li>
                                <li ><a href="/products">Products</a></li>

                                <ul class="sub-menu">
                                    <li><a href="/news.hbs">News</a></li>
                                    <li><a href="/single-news.hbs">Single News</a></li>
                                </ul>
                                </li>
                                <li><a href="/contact">Contact</a></li>
                                <li>
                                    <form method="post" action="/logout">
                                        <button class="a" type="submit"
                                            style="color:white; background: none; border: none;cursor: pointer; font-weight:bold">Log
                                            Out
                                        </button>
                                    </form>
                                </li>
                                <li>
                                    <div class="header-icons">
                                        <a href="/wishlist" style="color: orange;" class="love-icon">
                                            <i class="fas fa-heart"></i>
                                        </a>
                                        <a class="shopping-cart" href="/cart"><i class="fas fa-shopping-cart"></i></a>
                                        
                                        <a class="mobile-hide search-bar-icon" href="/profile"><i
                                                class="fas fa-user"></i></a>
                                    </div>
                                </li>
                            </ul>
                        </nav>
                        <a class="mobile-show search-bar-icon" href="#"><i class="fas fa-search"></i></a>
                        <div class="mobile-menu"></div>
                        <!-- menu end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end header -->


    <div class="breadcrumb-section breadcrumb-bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 offset-lg-2 text-center">
                    <div style="margin-top: -80px;" class="breadcrumb-text">
                        <p><a href="/">Home</a> > <a href="/products">Products</a> > <a href="/wishlist">Wishlist</a>
                        </p>

                        <h2 style="color: white;">Wishlist</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </header>
    </head>

    <body style="background-color: rgb(255, 255, 255);">
        <div>
            <div style="margin-top: 70px;margin-bottom:70px;" class="main-content">
                <div class="container mt-5">
                    <!-- Search Heading -->
                    <h3>Your Wishlist</h3>
                    <!-- Product Cards -->
                    <div class="container mt-5"> </div>

                    <div class="row mt-4" style="background-color: rgb(255, 255, 255); border-radius:11px;">
                        {{#each products}}
                        <div class="col-md-4 mb-4">
                            <a href="/product/{{this._id}}" style="text-decoration: none; color: inherit;">
                                <div class="card" style="background-color: rgb(224, 224, 224); border-radius:11px;">
                                    <img src="/{{this.images.[0]}}" class="card-img-top" alt="{{this.name}}"
                                        style="height: 200px; object-fit: cover;">
                                    <div style="background-color: rgb(255, 255, 255); border-radius:6px;"
                                        class="card-body">
                                        <h5 class="card-title">{{this.name}}</h5>
                                        <p class="card-text">Category: {{this.category}}</p>
                                        <p class="card-text">
                                            {{#if this.offerPrice}}
                                            <span class="price"
                                                style="text-decoration: line-through; color: red;">₹{{this.price}}</span>
                                            <span class="offer-price"
                                                style="color: green; font-weight: bold; font-size:19px">₹{{this.offerPrice}}</span>
                                            <span class="discount-tag" style="FONT-SIZE:13PX;color: rgb(255, 136, 0);">
                                                ({{this.discountValue}})
                                            </span>
                                            {{else}}
                                            <span class="price"
                                                style="font-weight: bold; font-size:19px; color: black; text-decoration:none">₹{{this.price}}</span>
                                            {{/if}}
                                        </p>
                                        <!-- Stock Information -->
                                        <p class="card-text stock">
                                            Stock:
                                            {{#if this.stock}}
                                            <span style="color:green;" class="in-stock">{{this.stock}} Available</span>
                                            {{else}}
                                            <span style="color: RED;" class="out-of-stock">Out of Stock</span>
                                            {{/if}}
                                        </p>

                                        <!-- Ratings -->
                                        <p class="card-text">
                                            Rating:
                                            <span class="rating">
                                                {{#each this.rating}}★{{/each}}
                                            </span>
                                            <span style="color: orange;font-size:14px "
                                                class="review-count">{{this.reviews.length}}★★★★★</span>
                                        </p>

                            </a><!-- Wishlist Button -->

                            <button
                                style="margin-top:20px;width:127px;;margin-left: 62%;font-size:13px;font-weight:bold"
                                class="btn btn-outline-warning remove-wishlist" data-product-id="{{this._id}}">
                                {{#if this.wishlist}}Remove Wishlist{{else}}Remove Wishlist{{/if}}
                            </button>
                            <form action="/addtocart" method="post">
                                <input type="hidden" name="productId" value="{{this._id}}">
                                <input type="hidden" name="quantity" value="1">
                                <div style="margin-left:30%;margin-top:-32px">
                                    <button class="btn btn-outline-warning remove-wishlist" style="margin-left:-20px"
                                        value="add to cart">
                                        <a style="border-width: 0px;font-size:13px"><i style="margin-right: 10px;"
                                                class="fas fa-shopping-cart"> </i><b>Add to Cart</b></a>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                </div>
                {{/each}}
            </div><!-- Pagination -->
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center pages custom-pagination">
    <!-- Show the "Previous" button if there is a previous page -->
    {{#if previousPage}}
      <li class="page-item">
        <a class="page-link" href="?page={{previousPage}}" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
    {{/if}}

    <!-- Generate page numbers -->
    {{#each (range 1 totalPages)}}
      <li class="page-item {{#if (isEqual this ../currentPage)}}active{{/if}}">
        <a class="page-link" href="?page={{this}}">{{this}}</a>
      </li>
    {{/each}}

    <!-- Show the "Next" button if there is a next page -->
    {{#if nextPage}}
      <li class="page-item">
        <a class="page-link" href="?page={{nextPage}}" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    {{/if}}
  </ul>
</nav>
            <script>
                // Event listener for adding/removing from wishlist
                document.addEventListener("DOMContentLoaded", function () {
                    const wishlistButtons = document.querySelectorAll('.remove-wishlist');

                    wishlistButtons.forEach(button => {
                        button.addEventListener('click', function () {
                            const productId = this.getAttribute('data-product-id');

                            // Call API to toggle wishlist status
                            fetch(`/toggle/${productId}`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({ productId })
                            })                               
                        });
                    });
                });
            </script>
        </div>

        </div>
        </div>
        <!-- logo carousel -->
        <div style="position: relative;" class="logo-carousel-section">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="logo-carousel-inner">

                            <div class="single-logo-item">
                                <img style="margin-top: 50px;"
                                    src="https://logos-world.net/wp-content/uploads/2020/04/Louis-Vuitton-Logo.png"
                                    alt="">
                            </div>
                            <div class="single-logo-item">
                                <img style="margin-top: 10px"
                                    src="https://parspng.com/wp-content/uploads/2022/10/pumapng.parspng.com_-300x300.png"
                                    alt="">
                            </div>
                            <div class="single-logo-item">
                                <img style="height:120px;width:120px;margin-top:36px"
                                    src="https://cdn2.iconfinder.com/data/icons/apple-tv-1/512/apple_logo-512.png"
                                    alt="">
                            </div>
                            <div class="single-logo-item">
                                <img style="margin-top: 17px;height:175px"
                                    src="https://images.samsung.com/is/image/samsung/assets/global/about-us/brand/logo/256_144_2.png?$512_N_PNG$"
                                    alt="">
                            </div>
                            <div class="single-logo-item">
                                <img style="margin-top: 45px"
                                    src="https://download.logo.wine/logo/Citizen_Watch/Citizen_Watch-Logo.wine.png"
                                    alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end logo carousel -->
        <!-- footer -->
        <div style="position: relative;" class="footer-area">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-box about-widget">
                            <h2 class="widget-title">About us</h2>
                            <p>Ut enim ad minim veniam perspiciatis unde omnis iste natus error sit voluptatem
                                accusantium
                                doloremque laudantium, totam rem aperiam, eaque ipsa quae.</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-box get-in-touch">
                            <h2 class="widget-title">Get in Touch</h2>
                            <ul>
                                <li>34/8, East Hukupara, Gifirtok, Sadan.</li>
                                <li>support@fruitkha.com</li>
                                <li>+00 111 222 3333</li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-box pages">
                            <h2 class="widget-title">Pages</h2>
                            <ul>
                                <li><a href="/index.hbs">Home</a></li>
                                <li><a href="/about.hbs">About</a></li>
                                <li><a href="/services.hbs">Shop</a></li>
                                <li><a href="/news.hbs">News</a></li>
                                <li><a href="/contact.hbs">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="footer-box subscribe">
                            <h2 class="widget-title">Subscribe</h2>
                            <p>Subscribe to our mailing list to get the latest updates.</p>
                            <form action="/index.hbs">
                                <input type="email" placeholder="Email">
                                <button type="submit"><i class="fas fa-paper-plane"></i></button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end footer -->

        <!-- copyright -->
        <div style="position: relative;" class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-12">
                        <p>Copyrights &copy; 2019 - <a href="https://imransdesign.com/">Imran Hossain</a>, All
                            Rights
                            Reserved.<br>
                            Distributed By - <a href="https://themewagon.com/">Themewagon</a>
                        </p>
                    </div>
                    <div class="col-lg-6 text-right col-md-12">
                        <div class="social-icons">
                            <ul>
                                <li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
                                <li><a href="#" target="_blank"><i class="fab fa-twitter"></i></a></li>
                                <li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
                                <li><a href="#" target="_blank"><i class="fab fa-linkedin"></i></a></li>
                                <li><a href="#" target="_blank"><i class="fab fa-dribbble"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- end copyright -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <!-- jquery -->
        <script src="/assets/js/jquery-1.11.3.min.js"></script>
        <!-- bootstrap -->
        <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
        <!-- count down -->
        <script src="/assets/js/jquery.countdown.js"></script>
        <!-- isotope -->
        <script src="/assets/js/jquery.isotope-3.0.6.min.js"></script>
        <!-- waypoints -->
        <script src="/assets/js/waypoints.js"></script>
        <!-- owl carousel -->
        <script src="/assets/js/owl.carousel.min.js"></script>
        <!-- magnific popup -->
        <script src="/assets/js/jquery.magnific-popup.min.js"></script>
        <!-- mean menu -->
        <script src="/assets/js/jquery.meanmenu.min.js"></script>
        <!-- sticker js -->
        <script src="/assets/js/sticker.js"></script>
        <!-- main js -->
        <script src="/assets/js/main.js"></script>

    </body>

</html>